\tikzset{BddNode/.style={rectangle,minimum size=6mm}}
\tikzset{BddLeaf/.style={rectangle,minimum size=6mm}}
\tikzset{BddTrue/.style={}}
\tikzset{BddFalse/.style={dotted}}

\tikzset{CfgInstr/.style={rectangle,minimum size=6mm}}
\tikzset{CommCfgInstr/.style={rectangle,minimum size=6mm,fill=blue!50}}
\tikzset{DupeCommCfgInstr/.style={rectangle,minimum size=6mm,fill=blue!10}}
\tikzset{InterferingCfgInstr/.style={rectangle,minimum size=6mm,fill=green!50}}
\tikzset{DupeInterferingCfgInstr/.style={rectangle,minimum size=6mm,fill=green!10}}
\tikzset{NewCfgInstr/.style={rectangle,minimum size=6mm,fill=red!50}}
\tikzset{stateSideEffect/.style={rectangle,draw}}
\tikzset{stateIf/.style={ellipse,draw}}
\tikzset{stateTerminal/.style={ellipse,draw}}
\tikzset{killEdge/.style={decorate,decoration={snake,segment length=1mm,post length=0.4mm}}}
\tikzset{swungEdge/.style={color=red}}
\tikzset{happensBeforeEdge/.style={dashed}}
\tikzset{ifTrue/.style={}}
\tikzset{ifFalse/.style={dotted}}

\newcommand{\draftonly}[1]{#1}
\newcommand{\editorial}[1]{\draftonly{\textcolor{red}{\footnote{\textcolor{red}{#1}}}}}
\newcommand{\smh}[1]{\draftonly{\textcolor{green}{\footnote{\textcolor{green}{#1}}}}}
\newcommand{\needCite}{\draftonly{\editorial{need cite}}}
\newcommand{\todo}[1]{\draftonly{\textcolor{red}{#1}}}

% Used the first time we introduce a new bit of terminology
\newcommand{\introduction}[1]{\textbf{#1}}
% Backrefs to earlier \introductions.  I'm going to remove the colour
% in the final version, but I want it to be a bit more obvious if I
% have backrefs before introductions in the drafts.
\newcommand{\backref}[1]{\textcolor{purple}{#1}}

\newcommand{\needNewTerm}[1]{\textcolor{blue}{#1}}
\newcommand{\StateMachine}{\needNewTerm{banana}}
\newcommand{\StateMachines}{\needNewTerm{bananas}}
\newcommand{\STateMachine}{\needNewTerm{Banana}}
\newcommand{\STateMachines}{\needNewTerm{Bananas}}
\newcommand{\CrashSummary}{\needNewTerm{strawberry}}
\newcommand{\CrashSummaries}{\needNewTerm{strawberries} }
\newcommand{\implementation}{\needNewTerm{grapefruit}}
\newcommand{\Implementation}{\needNewTerm{Grapefruit}}
\newcommand{\technique}{\needNewTerm{aubergine}}
\newcommand{\Technique}{\needNewTerm{Aubergine}}

\newcommand{\false}{\ensuremath{\mathit{false}}}
\newcommand{\true}{\ensuremath{\mathit{true}}}

\newcommand{\mai}[2]{\mathrm{#1}\!:\!\mathrm{#2}}
\newcommand{\happensBeforeEdge}{\leftarrowtail}
\newcommand{\happensBefore}[2]{#1\,{\happensBeforeEdge}\,#2}
\newcommand{\controlEdge}[3]{\mathrm{Control}(\mathrm{#1}:\mathrm{#2} \rightarrow \mathrm{#3})}
\newcommand{\entryExpr}[1]{\mathrm{Entry}(#1)}
\newcommand{\smTmp}[1]{\mathrm{tmp#1}}
\newcommand{\smLoad}[1]{\mathrm{Load}(#1)}
\newcommand{\smBadPtr}[1]{\mathrm{BadPtr}(#1)}

\newcommand{\stLoad}[2]{\state{Load} $\ast(#2) \rightarrow \smTmp{#1}$}
\newcommand{\stCopy}[2]{\state{Copy} $#2 \rightarrow \smTmp{#1}$}
\newcommand{\stStore}[2]{\state{Store} $#1 \rightarrow \ast(#2)$}
\newcommand{\stIf}[1]{\state{If} ($#1$)}
\newcommand{\stAssert}[1]{\state{Assert} ($#1$)}
\newcommand{\stSurvive}{\state{Survive}}
\newcommand{\stCrash}{\state{Crash}}
\newcommand{\stUnreached}{\state{Unreached}}
\newcommand{\stStartAtomic}{\state{StartAtomic}}
\newcommand{\stEndAtomic}{\state{EndAtomic}}

\newcommand{\queue}[1]{\{#1\}}
\newcommand{\map}[1]{\{#1\}}
\newcommand{\mapIndex}[2]{#1[#2]}
\newcommand{\state}[1]{\textsc{#1}}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
    \node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
